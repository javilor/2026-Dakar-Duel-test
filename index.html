<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dakar Duel 2026 - Dashboard</title>
    <style>
        /* ===== GLOBAL STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #FFDBBB 0%, #FF6600 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* ===== LEADERBOARD SECTION ===== */
        .leaderboard {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .leaderboard h2 {
            color: #000000;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .player-score {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #64869e;
        }
        
        .player-score.winner {
            border-left-color: #64869e;
            background: #f0f0f0;
        }
        
        .player-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score-display {
            font-size: 2em;
            color: #000000;
            font-weight: bold;
        }
        
        .progress-bar {
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: #FF6600;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
        }

        /* ===== HISTORIC RESULTS SECTION ===== */
        .historic-results {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .historic-results h2 {
            color: #000000;
            margin-bottom: 20px;
        }

        .historic-results table {
            width: 100%;
            border-collapse: collapse;
        }

        .historic-results th, .historic-results td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }

        .historic-results th {
            background-color: #f8f9fa;
        }
        
        /* ===== STAGE RESULTS SECTION ===== */
        .stage-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stage-section h2 {
            color: #000000;
            margin-bottom: 20px;
        }
        
        .stage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .stage-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #f8f9fa;
            transition: transform 0.2s;
        }
        
        .stage-card:hover {
            transform: translateY(-5px);
            border-color: #FF6600;
        }
        
        .stage-card.completed {
            background: #FFDBBB;
            border-color: #FF6600;
        }
        
        .stage-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #000000;
            margin-bottom: 10px;
        }
        
        .stage-scores {
            font-size: 0.9em;
            color: #000000;
        }
        
        /* ===== TEAM OVERVIEW SECTION ===== */
        .team-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .team-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .team-card h2 {
            color: #000000;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .category {
            margin-bottom: 20px;
        }
        
        .category h3 {
            color: #FF6600;
            font-size: 1.1em;
            margin-bottom: 10px;
            border-bottom: 2px solid #FF6600;
            padding-bottom: 5px;
        }
        
        .competitor {
            padding: 10px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #000000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .competitor.replacement {
            border-left-color: #ff9800;
            opacity: 0.7;
        }
        
        .competitor.emergency {
            border-left-color: #f44336;
        }
        
        .competitor-name {
            font-weight: bold;
        }
        
        .competitor-status {
            font-size: 0.8em;
            padding: 3px 8px;
            border-radius: 5px;
            background: #e0e0e0;
        }
        
        .status-active {
            background: #4caf50;
            color: white;
        }
        
        .status-replaced {
            background: #ff9800;
            color: white;
        }
        
        .status-emergency {
            background: #f44336;
            color: white;
        }
        
        /* ===== CAPTAIN/JOKER INDICATORS ===== */
        .strategic-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .strategic-section h2 {
            color: #000000;
            margin-bottom: 20px;
        }
        
        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .strategy-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 5px 5px 5px 0;
            font-weight: bold;
        }
        
        .badge-captain {
            background: #64869e;
            color: white;
        }
        
        .badge-joker {
            background: #64869e;
            color: #333;
        }
        
        .badge-used {
            background: #000000;
            color: #999;
            text-decoration: line-through;
        }
        
        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.5em;
            }
            
            .stage-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            
            .team-section {
                grid-template-columns: 1fr;
            }
        }
        
        /* ===== UPDATE BUTTON ===== */
        .update-note {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÅ Dakar Duel 2026 Dashboard üèÅ</h1>
        
        <!-- LEADERBOARD -->
        <div class="leaderboard">
            <h2>üèÜ Current Standings</h2>
            <div id="leaderboard-content"></div>
        </div>

        <!-- HISTORIC RESULTS SECTION -->
        <div class="historic-results">
            <h2>üìà Historic Results</h2>
            <div id="historic-results-content"></div>
        </div>
        
        <!-- STAGE RESULTS -->
        <div class="stage-section">
            <h2>üìä Stage Progress</h2>
            <div class="stage-grid" id="stage-grid"></div>
        </div>
        
        <!-- CAPTAIN & JOKER USAGE -->
        <div class="strategic-section">
            <h2>‚ö° Strategic Plays</h2>
            <div class="strategy-grid" id="strategy-grid"></div>
        </div>
        
        <!-- TEAM OVERVIEW -->
        <div class="team-section">
            <div class="team-card" id="team1-overview"></div>
            <div class="team-card" id="team2-overview"></div>
        </div>
    </div>

<script>
    // ===== DATA CONFIGURATION =====
    const gameData = {
        players: [
            {
                name: "Javier Yag√ºe",
                totalScore: 0,
                moto: {
                    primary: ["Canet", "Shareina", "Branch"],
                    replacement: "Docherty",
                    emergency: null,
                    active: ["Canet", "Shareina", "Branch"]
                },
                cars: {
                    primary: ["Guthrie", "Ekstrom", "Sainz"],
                    replacement: "Loeb",
                    emergency: null,
                    active: ["Guthrie", "Ekstrom", "Sainz"]
                },
                captains: [
                    {stage: 2, competitor: "Canet", category: "motos", earned: 0} 
                ],
                jokerUsed: null,
                emergencyPenalty: 0
            },
            {
                name: "Javilord",
                totalScore: 0,
                moto: {
                    primary: ["Shareina", "Bravec", "Benavides"],
                    replacement: "Sanders",
                    emergency: null,
                    active: ["Shareina", "Bravec", "Benavides"]
                },
                cars: {
                    primary: ["Loeb", "Roma", "Price"],
                    replacement: "Sanz",
                    emergency: null,
                    active: ["Loeb", "Roma", "Price"]
                },
                captains: [
                    {stage: 2, competitor: "Shareina", category: "motos", earned: 0} 
                ],
                jokerUsed: null,
                emergencyPenalty: 0
            }
        ],
        
        stageResults: {
            1: {
                moto: {
                    "Canet": 2,
                    "Shareina": 5,
                    "Branch": 7,
                    "Bravec": 3,
                    "Benavides": 9,
                    "Docherty": 8,
                    "Sanders": 1
                },
                cars: {
                    "Guthrie": 12,
                    "Ekstrom": 13,
                    "Sainz": 16,
                    "Loeb": 7,
                    "Roma": 17,
                    "Price": 4,
                    "Sanz": 21
                }
            }
        },
        
        currentStage: 1,
        
        finalPositions: {
            moto: {},
            cars: {}
        }
    };
    
    const pointsTable = {
        1: 100, 2: 90, 3: 80, 4: 70, 5: 60,
        6: 50, 7: 40, 8: 30, 9: 20, 10: 10
    };
    
    const podiumBonus = {1: 250, 2: 150, 3: 100};
    
    function calculateStagePoints(position, isJoker = false) {
        if (position > 10 || position < 1) return 0;
        
        if (isJoker) {
            if (position === 1) return 120;
            let adjustedPos = Math.max(1, position - 2);
            return pointsTable[adjustedPos] || 0;
        }
        
        return pointsTable[position] || 0;
    }
    
    function calculateTotalScore(player) {
        let total = 0;

        for (let stage in gameData.stageResults) {
            const results = gameData.stageResults[stage];

            ['moto', 'cars'].forEach(category => {
                player[category].active.forEach(competitor => {
                    if (results[category] && results[category][competitor]) {
                        const position = results[category][competitor];
                        const isJoker = player.jokerUsed && 
                                        player.jokerUsed.stage == stage && 
                                        player.jokerUsed.competitor === competitor;

                        const isReplacement = competitor === player[category].replacement;

                        if (!isReplacement) {
                            total += calculateStagePoints(position, isJoker);
                        }
                    }
                });
            });
        }

        player.captains.forEach(cap => {
            total += cap.earned || 0;
        });

        ['moto', 'cars'].forEach(category => {
            player[category].active.forEach(competitor => {
                if (competitor !== player[category].emergency && competitor !== player[category].replacement) {
                    const finalPos = gameData.finalPositions[category][competitor];
                    if (finalPos && podiumBonus[finalPos]) {
                        total += podiumBonus[finalPos];
                    }
                }
            });
        });

        total -= player.emergencyPenalty;

        return total;
    }

    function renderHistoricResults() {
        const container = document.getElementById('historic-results-content');
        let html = '<table><tr><th>Competitor</th><th>Stage 1</th><th>Stage 2</th><th>Stage 3</th><th>Stage 4</th><th>Stage 5</th><th>Stage 6</th><th>Stage 7</th><th>Stage 8</th><th>Stage 9</th><th>Stage 10</th></tr>';

        const competitors = {};
        
        gameData.players.forEach(player => {
            const allCompetitors = [...player.moto.primary, player.moto.replacement, ...player.cars.primary, player.cars.replacement];
            allCompetitors.forEach(comp => {
                if (!competitors[comp]) {
                    competitors[comp] = { name: comp, scores: Array(10).fill('-') }; 
                }
            });
        });

        for (let stage = 1; stage <= 10; stage++) {
            const results = gameData.stageResults[stage];
            if (results) {
                for (const category in results) {
                    for (const competitor in results[category]) {
                        const position = results[category][competitor];
                        const index = position > 10 ? 10 : position - 1; 
                        if (competitors[competitor]) {
                            competitors[competitor].scores[stage - 1] = position; 
                        }
                    }
                }
            }
        }

        for (const competitor in competitors) {
            html += `<tr><td>${competitors[competitor].name}</td>`;
            competitors[competitor].scores.forEach(score => {
                html += `<td>${score}</td>`;
            });
            html += '</tr>';
        }

        html += '</table>';
        container.innerHTML = html;
    }

    function renderLeaderboard() {
        const container = document.getElementById('leaderboard-content');
        const players = gameData.players.map(p => ({
            ...p,
            score: calculateTotalScore(p)
        })).sort((a, b) => b.score - a.score);
        
        const maxScore = Math.max(...players.map(p => p.score), 1);
        
        container.innerHTML = players.map((player, index) => `
            <div class="player-score ${index === 0 ? 'winner' : ''}">
                <div class="player-name">
                    ${index === 0 ? 'üëë ' : ''}${player.name}
                </div>
                <div class="score-display">${player.score} pts</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${(player.score / maxScore * 100)}%">
                        ${player.score}
                    </div>
                </div>
            </div>
        `).join('');
    }
    
    function renderStageGrid() {
        const container = document.getElementById('stage-grid');
        let html = '';
        
        for (let i = 1; i <= 10; i++) {*
