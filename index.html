<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dakar Duel 2026 - Dashboard</title>
    <style>
        /* ===== GLOBAL STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* ===== LEADERBOARD SECTION ===== */
        .leaderboard {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .leaderboard h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .player-score {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        .player-score.winner {
            border-left-color: #ffd700;
            background: #fffef0;
        }
        
        .player-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score-display {
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
        }
        
        .progress-bar {
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
        }
        
        /* ===== STAGE RESULTS SECTION ===== */
        .stage-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stage-section h2 {
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .stage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .stage-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: transform 0.2s;
        }
        
        .stage-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
        }
        
        .stage-card.completed {
            background: #e8f5e9;
            border-color: #4caf50;
        }
        
        .stage-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .stage-scores {
            font-size: 0.9em;
            color: #666;
        }
        
        /* ===== TEAM OVERVIEW SECTION ===== */
        .team-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .team-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .team-card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .category {
            margin-bottom: 20px;
        }
        
        .category h3 {
            color: #764ba2;
            font-size: 1.1em;
            margin-bottom: 10px;
            border-bottom: 2px solid #764ba2;
            padding-bottom: 5px;
        }
        
        .competitor {
            padding: 10px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .competitor.replacement {
            border-left-color: #ff9800;
            opacity: 0.7;
        }
        
        .competitor.emergency {
            border-left-color: #f44336;
        }
        
        .competitor-name {
            font-weight: bold;
        }
        
        .competitor-status {
            font-size: 0.8em;
            padding: 3px 8px;
            border-radius: 5px;
            background: #e0e0e0;
        }
        
        .status-active {
            background: #4caf50;
            color: white;
        }
        
        .status-replaced {
            background: #ff9800;
            color: white;
        }
        
        .status-emergency {
            background: #f44336;
            color: white;
        }
        
        /* ===== CAPTAIN/JOKER INDICATORS ===== */
        .strategic-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .strategic-section h2 {
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .strategy-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 5px 5px 5px 0;
            font-weight: bold;
        }
        
        .badge-captain {
            background: #2196f3;
            color: white;
        }
        
        .badge-joker {
            background: #ffd700;
            color: #333;
        }
        
        .badge-used {
            background: #e0e0e0;
            color: #999;
            text-decoration: line-through;
        }
        
        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.5em;
            }
            
            .stage-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            
            .team-section {
                grid-template-columns: 1fr;
            }
        }
        
        /* ===== UPDATE BUTTON ===== */
        .update-note {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÅ Dakar Duel 2026 Dashboard</h1>
        
        <!-- Update Instructions -->
        <div class="update-note">
            <strong>üìù To Update:</strong> Right-click this page ‚Üí "View Page Source" ‚Üí Edit the data in the JavaScript section at the bottom
        </div>
        
        <!-- LEADERBOARD -->
        <div class="leaderboard">
            <h2>üèÜ Current Standings</h2>
            <div id="leaderboard-content"></div>
        </div>
        
        <!-- STAGE RESULTS -->
        <div class="stage-section">
            <h2>üìä Stage Progress</h2>
            <div class="stage-grid" id="stage-grid"></div>
        </div>
        
        <!-- CAPTAIN & JOKER USAGE -->
        <div class="strategic-section">
            <h2>‚ö° Strategic Plays</h2>
            <div class="strategy-grid" id="strategy-grid"></div>
        </div>
        
        <!-- TEAM OVERVIEW -->
        <div class="team-section">
            <div class="team-card" id="team1-overview"></div>
            <div class="team-card" id="team2-overview"></div>
        </div>
    </div>

<script>
    // ===== DATA CONFIGURATION =====
    // Edit this section to update your league data
    
    const gameData = {
        players: [
            {
                name: "Javier Yag√ºe",
                totalScore: 0, // Will be auto-calculated
                moto: {
                    primary: ["Canet", "Shareina", "Branch"],
                    replacement: "Docherty",
                    emergency: null, // Set name if activated
                    active: ["Canet", "Shareina", "Branch"] // Update as replacements happen
                },
                cars: {
                    primary: ["Guthrie", "Ekstrom", "Sainz"],
                    replacement: "Loeb",
                    emergency: null,
                    active: ["Guthrie", "Ekstrom", "Sainz"]
                },
                captains: [], // Array of {stage: 1, competitor: "Canet", category: "moto", earned: 20}
                jokerUsed: null, // {stage: 5, competitor: "Guthrie", category: "cars"}
                emergencyPenalty: 0
            },
            {
                name: "Javilord",
                totalScore: 0,
                moto: {
                    primary: ["Shareina", "Bravec", "Benavides"],
                    replacement: "Sanders",
                    emergency: null,
                    active: ["Shareina", "Bravec", "Benavides"]
                },
                cars: {
                    primary: ["Loeb", "Roma", "Price"],
                    replacement: "Sanz",
                    emergency: null,
                    active: ["Loeb", "Roma", "Price"]
                },
                captains: [],
                jokerUsed: null,
                emergencyPenalty: 0
            }
        ],
        
        // ‚≠ê Stage results: Add actual positions after each stage
        stageResults: {
            1: {
                moto: {
                    "Canet": 2,
                    "Shareina": 5,  // Note: Shareina appears in BOTH teams
                    "Branch": 7,
                    "Bravec": 3,
                    "Benavides": 9,
                    "Docherty": 8,  // Add even if not active
                    "Sanders": 1
                },
                cars: {
                    "Guthrie": 12,
                    "Ekstrom": 13,
                    "Sainz": 16,
                    "Loeb": 7,  // Note: Loeb is in BOTH as primary AND replacement
                    "Roma": 17,
                    "Price": 4,
                    "Sanz": 21
                }
            }
        },
        
        currentStage: 1, // Update to current stage number (0-10)
        
        // Final overall positions (after stage 10)
        finalPositions: {
            moto: {}, // {"Canet": 1, "Shareina": 5, ...}
            cars: {}  // {"Driver X": 2, ...}
        }
    };
    
    // ===== SCORING LOGIC =====
    const pointsTable = {
        1: 100, 2: 90, 3: 80, 4: 70, 5: 60,
        6: 50, 7: 40, 8: 30, 9: 20, 10: 10
    };
    
    const podiumBonus = {1: 250, 2: 150, 3: 100};
    
    function calculateStagePoints(position, isJoker = false) {
        if (position > 10 || position < 1) return 0;
        
        if (isJoker) {
            if (position === 1) return 120;
            let adjustedPos = Math.max(1, position - 2);
            return pointsTable[adjustedPos] || 0;
        }
        
        return pointsTable[position] || 0;
    }
    
    function calculateTotalScore(player) {
    let total = 0;

    // Stage points
    for (let stage in gameData.stageResults) {
        const results = gameData.stageResults[stage];

        // Check each category
        ['moto', 'cars'].forEach(category => {
            player[category].active.forEach(competitor => {
                if (results[category] && results[category][competitor]) {
                    const position = results[category][competitor];

                    // Check if this was a joker play
                    const isJoker = player.jokerUsed && 
                                    player.jokerUsed.stage == stage && 
                                    player.jokerUsed.competitor === competitor;

                    // Check if competitor is a replacement
                    const isReplacement = competitor === player[category].replacement;

                    // Only add points if the competitor is not a replacement
                    if (!isReplacement) {
                        total += calculateStagePoints(position, isJoker);
                    }
                }
            });
        });
    }

    // Captain bonuses
    player.captains.forEach(cap => {
        total += cap.earned || 0;
    });

    // Final podium bonuses
    ['moto', 'cars'].forEach(category => {
        player[category].active.forEach(competitor => {
            // Don't give bonus to emergency picks
            if (competitor !== player[category].emergency && competitor !== player[category].replacement) {
                const finalPos = gameData.finalPositions[category][competitor];
                if (finalPos && podiumBonus[finalPos]) {
                    total += podiumBonus[finalPos];
                }
            }
        });
    });

    // Emergency penalty
    total -= player.emergencyPenalty;

    return total;
}

    
    // ===== RENDER FUNCTIONS =====
    
    function renderLeaderboard() {
        const container = document.getElementById('leaderboard-content');
        const players = gameData.players.map(p => ({
            ...p,
            score: calculateTotalScore(p)
        })).sort((a, b) => b.score - a.score);
        
        const maxScore = Math.max(...players.map(p => p.score), 1);
        
        container.innerHTML = players.map((player, index) => `
            <div class="player-score ${index === 0 ? 'winner' : ''}">
                <div class="player-name">
                    ${index === 0 ? 'üëë ' : ''}${player.name}
                </div>
                <div class="score-display">${player.score} pts</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${(player.score / maxScore * 100)}%">
                        ${player.score}
                    </div>
                </div>
            </div>
        `).join('');
    }
    
    function renderStageGrid() {
        const container = document.getElementById('stage-grid');
        let html = '';
        
        for (let i = 1; i <= 10; i++) {
            const completed = gameData.stageResults[i] !== undefined;
            const player1Score = completed ? calculateStageScore(gameData.players[0], i) : '-';
            const player2Score = completed ? calculateStageScore(gameData.players[1], i) : '-';
            
            html += `
                <div class="stage-card ${completed ? 'completed' : ''}">
                    <div class="stage-number">Stage ${i}</div>
                    <div class="stage-scores">
                        <div>${gameData.players[0].name}: ${player1Score}</div>
                        <div>${gameData.players[1].name}: ${player2Score}</div>
                    </div>
                </div>
            `;
        }
        
        container.innerHTML = html;
    }
    
    function calculateStageScore(player, stage) {
        const results = gameData.stageResults[stage];
        if (!results) return 0;
        
        let total = 0;
        
        ['moto', 'cars'].forEach(category => {
            player[category].active.forEach(competitor => {
                if (results[category] && results[category][competitor]) {
                    const position = results[category][competitor];
                    const isJoker = player.jokerUsed && 
                                  player.jokerUsed.stage == stage && 
                                  player.jokerUsed.competitor === competitor;
                    total += calculateStagePoints(position, isJoker);
                }
            });
        });
        
        // Add captain bonus
        const captainForStage = player.captains.find(c => c.stage == stage);
        if (captainForStage) {
            total += captainForStage.earned || 0;
        }
        
        return total;
    }
    
    function renderStrategySection() {
        const container = document.getElementById('strategy-grid');
        
        container.innerHTML = gameData.players.map(player => `
            <div class="strategy-card">
                <h3>${player.name}</h3>
                <div>
                    <strong>Captains Used:</strong><br>
                    ${player.captains.map(c => 
                        `<span class="badge badge-captain">S${c.stage}: ${c.competitor} (+${c.earned})</span>`
                    ).join('') || '<em>None yet</em>'}
                </div>
                <div style="margin-top: 10px;">
                    <strong>Joker:</strong><br>
                    ${player.jokerUsed ? 
                        `<span class="badge badge-joker">S${player.jokerUsed.stage}: ${player.jokerUsed.competitor}</span>` : 
                        '<span class="badge badge-captain">Available</span>'
                    }
                </div>
            </div>
        `).join('');
    }
    
    function renderTeamOverview() {
        gameData.players.forEach((player, index) => {
            const container = document.getElementById(`team${index + 1}-overview`);
            
            container.innerHTML = `
                <h2>${player.name}'s Team</h2>
                
                <div class="category">
                    <h3>üèçÔ∏è Moto</h3>
                    ${renderCompetitors(player.moto, 'moto')}
                </div>
                
                <div class="category">
                    <h3>üöó Cars</h3>
                    ${renderCompetitors(player.cars, 'cars')}
                </div>
            `;
        });
    }
    
    function renderCompetitors(category, type) {
        let html = '';
        
        // Primary competitors
        category.primary.forEach(comp => {
            const isActive = category.active.includes(comp);
            html += `
                <div class="competitor">
                    <span class="competitor-name">${comp}</span>
                    <span class="competitor-status ${isActive ? 'status-active' : 'status-replaced'}">
                        ${isActive ? 'Active' : 'Replaced'}
                    </span>
                </div>
            `;
        });
        
        // Replacement
        const replacementActive = category.active.includes(category.replacement);
        html += `
            <div class="competitor replacement">
                <span class="competitor-name">üîÑ ${category.replacement}</span>
                <span class="competitor-status ${replacementActive ? 'status-active' : ''}">
                    ${replacementActive ? 'Active' : 'Standby'}
                </span>
            </div>
        `;
        
        // Emergency pick
        if (category.emergency) {
            html += `
                <div class="competitor emergency">
                    <span class="competitor-name">üö® ${category.emergency}</span>
                    <span class="competitor-status status-emergency">Emergency (-100)</span>
                </div>
            `;
        }
        
        return html;
    }
    
    // ===== INITIALIZE DASHBOARD =====
    function init() {
        renderLeaderboard();
        renderStageGrid();
        renderStrategySection();
        renderTeamOverview();
    }
    
    // Run on page load
    init();
    
    // Auto-refresh every 30 seconds (optional)
    // setInterval(init, 30000);
</script>
</body>
</html>
